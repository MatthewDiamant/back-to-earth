<html><style>* {
      margin: 0;
    }
    body {
      align-items: center;
      background: black;
      display: flex;
      justify-content: center;
    }

    canvas {
      background: white;
      image-rendering: pixelated;
    }

    main {
      filter: brightness(0);
      transition: 5s filter;
    }

    main.loaded {
      filter: brightness(1);
    }

    .scanlines {
      position: relative;
      overflow: hidden;
    }
    .scanlines:before,
    .scanlines:after {
      display: block;
      pointer-events: none;
      content: "";
      position: absolute;
    }

    .scanlines:before {
      width: 100%;
      height: 2px;
      z-index: 2147483649;
      background: rgba(57, 255, 20, 0.12);
      opacity: 0.75;
      animation: scanline 6s linear infinite;
    }

    .scanlines:after {
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
      z-index: 2147483648;
      background: linear-gradient(
        to bottom,
        transparent 50%,
        rgba(57, 255, 20, 0.12) 51%
      );
      background-size: 100% 4px;
      animation: scanlines 1s steps(60) infinite;
    }

    @keyframes scanline {
      0% {
        transform: translate3d(0, 200000%, 0);
      }
    }

    @keyframes scanlines {
      0% {
        background-position: 0 50%;
      }
    }</style><main class="scanlines"><canvas id="c" width="640" height="480"></canvas></main></html><script>!function(t){var e={};function i(s){if(e[s])return e[s].exports;var r=e[s]={i:s,l:!1,exports:{}};return t[s].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(s,r,function(e){return t[e]}.bind(null,r));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=5)}([function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return Sound});var jsfxr__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),jsfxr__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(jsfxr__WEBPACK_IMPORTED_MODULE_0__);class Oscillator{constructor(){window.AudioContext=window.AudioContext||window.webkitAudioContext;let t=new AudioContext;this.oscillator=t.createOscillator(),this.gainNode=t.createGain(),this.oscillator.connect(this.gainNode),this.gainNode.connect(t.destination),this.gainNode.gain.value=0,this.oscillator.start(0)}on({frequency:t,type:e,volume:i}){this.oscillator.type=e,this.gainNode.gain.value=i,this.oscillator.frequency.value=t}off(){this.gainNode.gain.value=0}kill(){this.oscillator.stop(0)}play({volume:t,frequency:e,duration:i,type:s}){this.oscillator.type=s,this.oscillator.frequency.value=e,this.gainNode.gain.value=t,setTimeout(()=>this.gainNode.gain.value=0,i)}}class Sound{constructor(){this.state={engine:!1}}engineOn(){this.state.engine||(this.state.engine=!0,this.engine=this.engine||new Oscillator,this.engine.on({frequency:50,type:"triangle",volume:.2}))}engineOff(){this.state.engine&&(this.state.engine=!1,this.engine.off(),this.engine=null)}playSound(url){const soundUrl=jsfxr__WEBPACK_IMPORTED_MODULE_0___default()(eval(url));let player=new Audio;player.src=soundUrl,player.play()}mainLaser(){this.playSound("[2,,0.1749,,0.3063,0.713,0.2,-0.2645,,,,,,0.0543,0.1546,,,,1,,,,,0.5]")}secondaryLaser(){this.playSound("[2,,0.1426,,0.2251,0.7799,0.2555,-0.2285,,,,,,0.7631,-0.4501,,,,1,,,0.0846,,0.5]")}missile(){this.playSound("[3,,0.0937,0.571,0.3803,0.7495,,,,,,,,,,,,,1,,,,,0.5]")}projectileHit(){this.playSound("[3,,0.0867,,0.2283,0.2711,,-0.6853,,,,,,,,,,,1,,,,,0.5]")}enemyLaser(){this.playSound("[0,,0.2934,0.1381,0.2143,0.6919,0.3422,-0.2379,,,,,,0.4281,-0.6711,,,,1,,,0.194,,0.5]")}}},function(t,e,i){function s(){this.setSettings=function(t){for(var e=0;e<24;e++)this[String.fromCharCode(97+e)]=t[e]||0;this.c<.01&&(this.c=.01);var i=this.b+this.c+this.e;if(i<.18){var s=.18/i;this.b*=s,this.c*=s,this.e*=s}}}var r=new function(){var t,e,i,r,a,n,o,h,l,c,d,f;this._params=new s,this.reset=function(){var t=this._params;r=100/(t.f*t.f+.001),a=100/(t.g*t.g+.001),n=1-t.h*t.h*t.h*.01,o=-t.i*t.i*t.i*1e-6,t.a||(d=.5-t.n/2,f=5e-5*-t.o),h=1+t.l*t.l*(t.l>0?-.9:10),l=0,c=1==t.m?0:(1-t.m)*(1-t.m)*2e4+32},this.totalReset=function(){this.reset();var s=this._params;return t=s.b*s.b*1e5,e=s.c*s.c*1e5,i=s.e*s.e*1e5+12,3*((t+e+i)/3|0)},this.synthWave=function(s,u){var p=this._params,y=1!=p.s||p.v,w=p.v*p.v*.1,x=1+3e-4*p.w,m=p.s*p.s*p.s*.1,g=1+1e-4*p.t,v=1!=p.s,b=p.x*p.x,M=p.g,C=p.q||p.r,S=p.r*p.r*p.r*.2,j=p.q*p.q*(p.q<0?-1020:1020),_=p.p?32+((1-p.p)*(1-p.p)*2e4|0):0,k=p.d,O=p.j/2,E=p.k*p.k*.01,L=p.a,A=t,P=1/t,D=1/e,z=1/i,B=5/(1+p.u*p.u*20)*(.01+m);B>.8&&(B=.8),B=1-B;for(var I,T,R,U,q,H,N=!1,F=0,W=0,Y=0,X=0,K=0,G=0,J=0,$=0,Q=0,V=0,Z=new Array(1024),tt=new Array(32),et=Z.length;et--;)Z[et]=0;for(et=tt.length;et--;)tt[et]=2*Math.random()-1;for(et=0;et<u;et++){if(N)return et;if(_&&++Q>=_&&(Q=0,this.reset()),c&&++l>=c&&(c=0,r*=h),(r*=n+=o)>a&&(r=a,M>0&&(N=!0)),T=r,O>0&&(V+=E,T*=1+Math.sin(V)*O),(T|=0)<8&&(T=8),L||((d+=f)<0?d=0:d>.5&&(d=.5)),++W>A)switch(W=0,++F){case 1:A=e;break;case 2:A=i}switch(F){case 0:Y=W*P;break;case 1:Y=1+2*(1-W*D)*k;break;case 2:Y=1-W*z;break;case 3:Y=0,N=!0}C&&((R=0|(j+=S))<0?R=-R:R>1023&&(R=1023)),y&&x&&((w*=x)<1e-5?w=1e-5:w>.1&&(w=.1)),H=0;for(var it=8;it--;){if(++J>=T&&(J%=T,3==L))for(var st=tt.length;st--;)tt[st]=2*Math.random()-1;switch(L){case 0:q=J/T<d?.5:-.5;break;case 1:q=1-J/T*2;break;case 2:q=.225*(((q=1.27323954*(U=6.28318531*((U=J/T)>.5?U-1:U))+.405284735*U*U*(U<0?1:-1))<0?-1:1)*q*q-q)+q;break;case 3:q=tt[Math.abs(32*J/T|0)]}y&&(I=G,(m*=g)<0?m=0:m>.1&&(m=.1),v?(K+=(q-G)*m,K*=B):(G=q,K=0),X+=(G+=K)-I,q=X*=1-w),C&&(Z[$%1024]=q,q+=Z[($-R+1024)%1024],$++),H+=q}H*=.125*Y*b,s[et]=H>=1?32767:H<=-1?-32768:32767*H|0}return u}};t.exports=function(t){r._params.setSettings(t);var e=r.totalReset(),i=new Uint8Array(4*((e+1)/2|0)+44),s=2*r.synthWave(new Uint16Array(i.buffer,44),e),a=new Uint32Array(i.buffer,0,44);a[0]=1179011410,a[1]=s+36,a[2]=1163280727,a[3]=544501094,a[4]=16,a[5]=65537,a[6]=44100,a[7]=88200,a[8]=1048578,a[9]=1635017060,a[10]=s,s+=44;for(var n=0,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h="data:audio/wav;base64,";n<s;n+=3){var l=i[n]<<16|i[n+1]<<8|i[n+2];h+=o[l>>18]+o[l>>12&63]+o[l>>6&63]+o[63&l]}return h}},function(t,e,i){t.exports=function(){return i(3)('!function(n){var t={};function e(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return n[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}e.m=n,e.c=t,e.d=function(n,t,r){e.o(n,t)||Object.defineProperty(n,t,{enumerable:!0,get:r})},e.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},e.t=function(n,t){if(1&t&&(n=e(n)),8&t)return n;if(4&t&&"object"==typeof n&&n&&n.__esModule)return n;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:n}),2&t&&"string"!=typeof n)for(var i in n)e.d(r,i,function(t){return n[t]}.bind(null,i));return r},e.n=function(n){var t=n&&n.__esModule?function(){return n.default}:function(){return n};return e.d(t,"a",t),t},e.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},e.p="",e(e.s=0)}([function(n,t,e){"use strict";let r={songData:[{i:[2,100,128,0,3,201,128,0,0,0,0,6,29,0,0,0,194,4,1,3,25,191,115,244,147,6,84,6],p:[5,1,2,1,1,1,1,3,4,1,2,1,2,1,2,,,7,8,7,8,7,8,7,8,6,9],c:[{n:[123,123,135,128,123,123,135,130,126,125,126,128,123,123,135,128,123,123,135,130,126,125,126,128,123,123,135,128,123,123,135,130],f:[21,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,48]},{n:[123,123,135,128,123,123,135,130,126,125,126,128,123,123,135,128,123,123,135,130,126,125,126,128,123,,99,,,,99,,,,,,,,,,,,,,,,,,,,,,,,,,111],f:[,,,,,,,,,,,,,,,,,,,,,,,,,,,11,13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,31]},{n:[111,,,,,,,,123,,,,,,,,111,,,,,,,,123],f:[]},{n:[114,,,,,,,,126,,,,,,,,114,,,,,,,,114,126,111,123,114,126,118,130],f:[13,,,,,,,,,,,,,,,,,,,,,,,,13,,13,,13,,13,11,29,,,,,,,,,,,,,,,,,,,,,,,,32,,41,,29,,25,15]},{n:[123,123,135,128,123,123,135,130,126,125,126,128,123,123,135,128,123,123,135,130,126,125,126,128,123,,99,,,,99,,,,,,,,,,,,,,,,,,,,,,,,,,111],f:[13,11,21,17,,,,,,,,,,,,,,,,,,,,,,,,,,,,17,29,,25,113,,,,,,,,,,,,,,,,,,,,,,,,,,,,194]},{n:[111,,,,,,,,123,,,,,,,,111,,,,,,,,99],f:[]},{n:[111,123,,123,111,,123,111,111,123,,123,111,,123,111,111,123,,123,111,,123,111,111,123,,123,111,,123,111],f:[]},{n:[114,126,,126,114,,126,114,114,126,,126,114,,126,114,114,126,,126,114,,126,114,116,128,,128,116,,114,121],f:[]},{n:[],f:[]}]},{i:[0,255,117,1,0,255,110,0,1,0,4,6,35,0,0,0,0,0,0,2,14,1,1,39,76,5,0,0],p:[,1,1,1,1,1,1,2,,,,1,1,1,1,1,1,,,1,1,1,1,1,1],c:[{n:[147,,,,,,147,,,,147,,,,,,147,,,,,,147,,,,147,,,,147],f:[]},{n:[147],f:[]}]},{i:[0,0,140,0,0,0,140,0,0,60,4,10,68,0,0,0,187,5,0,1,239,135,0,32,108,5,16,4],p:[,1,1,2,3,2,3,4,,,,2,3,2,3,2,3,,,5,5,5,5,5,5,4],c:[{n:[,,,,147,,,,,,,,148,,,,,,,,147,,,,,,,,147],f:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,35]},{n:[,,,,147,,,147,,,,,148,,,,,,,,147,,,147,,,147,,,,147],f:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,35]},{n:[,,,,147,,,147,,,,,148,,,,,,,,147,,,147,,,147,,,147,147,147],f:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,35]},{n:[147],f:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,68]},{n:[147,,,147,,,147,,147,,,147,,147,,147,147,,,147,,,147,,147,,,147,,147,,147],f:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,35]}]},{i:[2,192,128,0,2,192,140,18,0,0,107,115,138,0,0,0,136,5,1,2,8,92,21,56,148,5,85,8],p:[3,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2],c:[{n:[111],f:[]},{n:[114],f:[]},{n:[111],f:[24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,24,5,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,56]}]},{i:[3,0,127,0,3,68,127,0,1,218,4,4,40,0,0,1,55,4,1,2,67,115,124,190,67,6,39,1],p:[,,,1,2,1,2,3,,,,1,2,1,2,1,2,,,1,4,1,4,1,4,3],c:[{n:[,,,,147,,,,,,,,147,,,,,,,,147,,,,,,,,147],f:[]},{n:[,,,,147,,,,,,,,147,,,,,,,,147,,,,,,,,147,,147,147],f:[]},{n:[147],f:[]},{n:[,,,,147,,,,,,,,147,,,,,,,,147,,,,,,,,147,,,147],f:[]}]},{i:[0,91,128,0,0,95,128,12,0,0,12,0,67,0,0,0,0,0,0,2,255,15,0,32,83,3,134,4],p:[,,,1,2,3,2,1,2,,,1,2,3,2,1,2,,,,,4,5,4,5],c:[{n:[159,,147,,154,,147,,157,,147,,154,,150,,159,,147,,154,,147,,162,,147,,154,,150,,123],f:[5,13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,67]},{n:[159,,147,,154,,147,,157,,147,,154,,150,,159,,147,,154,,147,,162,,147,,157,,162,,126],f:[]},{n:[159,,147,,154,,147,,157,,147,,154,,150,,159,,147,,154,,147,,162,,147,,154,,150,,123],f:[5,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,3]},{n:[159,,162,,164,,,,159,,162,164,,,162,,159,,162,,164,,,,159,,162,164,,,162],f:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,25]},{n:[157,,162,,164,,,,157,,162,164,,,162,,157,,162,,164,,,,157,,162,164,,,162],f:[,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,67]}]},{i:[3,146,140,0,1,224,128,3,0,0,92,0,95,0,0,3,179,5,1,3,37,135,63,67,150,3,157,6],p:[,,,,,,,,,1,2,3,,1,2,1,2,3,,4,5,,,,,3],c:[{n:[123,,,,,,,,,,,,,,,,130],f:[11,24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,92,67]},{n:[133,,,,,,,,,,,,,,,138,126,,,,,,,,,,,,125],f:[11,,,,,,,,,,,,,,,,,,,,,,,,,,,,11,,,,95,,,,,,,,,,,,,,,,,,,,,,,,,,,,29]},{n:[123],f:[24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,24,52,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,67]},{n:[123,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,138,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,116],f:[11,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,95]},{n:[133,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,126,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,118],f:[]}]},{i:[0,255,106,1,0,255,106,0,1,0,5,7,164,0,0,0,0,0,0,2,255,0,2,16,83,5,53,1],p:[,,,,,,,1,,,,,,,,,,1,,,,,,,,1],c:[{n:[147],f:[]}]}],rowLen:5513,patternLen:32,endPattern:26,numChannels:8},i=new function(){var n,t,e,r,i,f=function(n){return Math.sin(6.283184*n)},o=function(n){return.003959503758*Math.pow(2,(n-128)/12)},a=function(n,t,e){var r,i,f,a,c,l,p,s=u[n.i[0]],v=n.i[1],d=n.i[3],h=u[n.i[4]],y=n.i[5],g=n.i[8],w=n.i[9],M=n.i[10]*n.i[10]*4,b=n.i[11]*n.i[11]*4,m=n.i[12]*n.i[12]*4,j=1/m,O=n.i[13],P=e*Math.pow(2,2-n.i[14]),L=new Int32Array(M+b+m),_=0,x=0;for(r=0,i=0;r<M+b+m;r++,i++)i>=0&&(i-=P,l=o(t+(15&(O=O>>8|(255&O)<<4))+n.i[2]-128),p=o(t+(15&O)+n.i[6]-128)*(1+8e-4*n.i[7])),f=1,r<M?f=r/M:r>=M+b&&(f-=(r-M-b)*j),a=l,d&&(a*=f*f),c=s(_+=a)*v,a=p,g&&(a*=f*f),c+=h(x+=a)*y,w&&(c+=(2*Math.random()-1)*w),L[r]=80*c*f|0;return L},u=[f,function(n){return n%1<.5?1:-1},function(n){return n%1*2-1},function(n){var t=n%1*4;return t<2?t-1:3-t}];this.init=function(f){n=f,t=f.endPattern,e=0,r=f.rowLen*f.patternLen*(t+1)*2,i=new Int32Array(r)},this.generate=function(){var o,c,l,p,s,v,d,h,y,g,w,M,b,m,j=new Int32Array(r),O=n.songData[e],P=n.rowLen,L=n.patternLen,_=0,x=0,A=!1,S=[];for(l=0;l<=t;++l)for(d=O.p[l],p=0;p<L;++p){var I=d?O.c[d-1].f[p]:0;I&&(O.i[I-1]=O.c[d-1].f[p+L]||0,I<16&&(S=[]));var D=u[O.i[15]],C=O.i[16]/512,T=Math.pow(2,O.i[17]-9)/P,W=O.i[18],U=O.i[19],k=43.23529*O.i[20]*3.141592/44100,q=1-O.i[21]/255,z=1e-5*O.i[22],B=O.i[23]/32,E=O.i[24]/512,F=6.283184*Math.pow(2,O.i[25]-9)/P,G=O.i[26]/255,H=O.i[27]*P&-2;for(w=(l*L+p)*P,s=0;s<4;++s)if(v=d?O.c[d-1].n[p+s*L]:0){S[v]||(S[v]=a(O,v,P));var J=S[v];for(c=0,o=2*w;c<J.length;c++,o+=2)j[o]+=J[c]}for(c=0;c<P;c++)(g=j[h=2*(w+c)])||A?(M=k,W&&(M*=D(T*h)*C+.5),x+=(M=1.5*Math.sin(M))*(b=q*(g-x)-(_+=M*x)),g=3==U?x:1==U?b:_,z&&(g=(g*=z)<1?g>-1?f(.25*g):-1:1,g/=z),A=(g*=B)*g>1e-5,m=g*(1-(y=Math.sin(F*h)*E+.5)),g*=y):m=0,h>=H&&(m+=j[h-H+1]*G,g+=j[h-H]*G),j[h]=0|m,j[h+1]=0|g,i[h]+=0|m,i[h+1]+=0|g}return++e/n.numChannels},this.createWave=function(){var n=44+2*r-8,t=n-36,e=new Uint8Array(44+2*r);e.set([82,73,70,70,255&n,n>>8&255,n>>16&255,n>>24&255,87,65,86,69,102,109,116,32,16,0,0,0,1,0,2,0,68,172,0,0,16,177,2,0,4,0,16,0,100,97,116,97,255&t,t>>8&255,t>>16&255,t>>24&255]);for(var f=0,o=44;f<r;++f){var a=i[f];a=a<-32767?-32767:a>32767?32767:a,e[o++]=255&a,e[o++]=a>>8&255}return e},this.getData=function(n,t){for(var e=2*Math.floor(44100*n),r=new Array(t),f=0;f<2*t;f+=1){var o=e+f;r[f]=n>0&&o<i.length?i[o]/32768:0}return r}};i.init(r),i.init(r);let f=!1;setInterval(function(){if(!f&&(f=i.generate()>=1)){let n=i.createWave();postMessage(n)}},10)}]);',null)}},function(t,e,i){"use strict";var s=window.URL||window.webkitURL;t.exports=function(t,e){try{try{var i;try{(i=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder)).append(t),i=i.getBlob()}catch(e){i=new Blob([t])}return new Worker(s.createObjectURL(i))}catch(e){return new Worker("data:application/javascript,"+encodeURIComponent(t))}}catch(t){if(!e)throw Error("Inline worker is not supported");return new Worker(e)}}},function(module,exports){var indexOf=function(t,e){if(t.indexOf)return t.indexOf(e);for(var i=0;i<t.length;i++)if(t[i]===e)return i;return-1},Object_keys=function(t){if(Object.keys)return Object.keys(t);var e=[];for(var i in t)e.push(i);return e},forEach=function(t,e){if(t.forEach)return t.forEach(e);for(var i=0;i<t.length;i++)e(t[i],i,t)},defineProp=function(){try{return Object.defineProperty({},"_",{}),function(t,e,i){Object.defineProperty(t,e,{writable:!0,enumerable:!1,configurable:!0,value:i})}}catch(t){return function(t,e,i){t[e]=i}}}(),globals=["Array","Boolean","Date","Error","EvalError","Function","Infinity","JSON","Math","NaN","Number","Object","RangeError","ReferenceError","RegExp","String","SyntaxError","TypeError","URIError","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","eval","isFinite","isNaN","parseFloat","parseInt","undefined","unescape"];function Context(){}Context.prototype={};var Script=exports.Script=function(t){if(!(this instanceof Script))return new Script(t);this.code=t};Script.prototype.runInContext=function(t){if(!(t instanceof Context))throw new TypeError("needs a 'context' argument.");var e=document.createElement("iframe");e.style||(e.style={}),e.style.display="none",document.body.appendChild(e);var i=e.contentWindow,s=i.eval,r=i.execScript;!s&&r&&(r.call(i,"null"),s=i.eval),forEach(Object_keys(t),function(e){i[e]=t[e]}),forEach(globals,function(e){t[e]&&(i[e]=t[e])});var a=Object_keys(i),n=s.call(i,this.code);return forEach(Object_keys(i),function(e){(e in t||-1===indexOf(a,e))&&(t[e]=i[e])}),forEach(globals,function(e){e in t||defineProp(t,e,i[e])}),document.body.removeChild(e),n},Script.prototype.runInThisContext=function(){return eval(this.code)},Script.prototype.runInNewContext=function(t){var e=Script.createContext(t),i=this.runInContext(e);return t&&forEach(Object_keys(e),function(i){t[i]=e[i]}),i},forEach(Object_keys(Script.prototype),function(t){exports[t]=Script[t]=function(e){var i=Script(e);return i[t].apply(i,[].slice.call(arguments,1))}}),exports.isContext=function(t){return t instanceof Context},exports.createScript=function(t){return exports.Script(t)},exports.createContext=Script.createContext=function(t){var e=new Context;return"object"==typeof t&&forEach(Object_keys(t),function(i){e[i]=t[i]}),e}},function(t,e,i){"use strict";i.r(e);let s=null;class r{constructor(t){this.canvas=t,s=this.canvas.getContext("2d"),this.camera={x:0,y:0}}cameraAdjustX(t){return t-this.camera.x+this.canvas.width/2}cameraAdjustY(t){return t-this.camera.y+this.canvas.height/2}draw(t){s.save(),t(),s.restore()}clearBackground(){s.clearRect(0,0,this.canvas.width,this.canvas.height)}drawBackground(t){s.fillStyle=t,s.fillRect(0,0,this.canvas.width,this.canvas.height)}rect({rect:t,fillColor:e,strokeColor:i,shadowBlur:r,shadowColor:a,lineWidth:n=1,adjusted:o=!0,rotation:h,size:l}){o&&(t[0]=this.cameraAdjustX(t[0]),t[1]=this.cameraAdjustY(t[1])),h&&(s.translate(t[0]+l/2,t[1]+l/2),s.rotate(h),s.translate(-1*t[0]-l/2,-1*t[1]-l/2)),s.shadowBlur=r,s.shadowColor=a,e&&(s.fillStyle=e,s.fillRect(t[0],t[1],...t.slice(2))),i&&(s.strokeStyle=i,s.lineWidth=n,s.strokeRect(t[0],t[1],...t.slice(2)))}arc({arc:t,fillColor:e,strokeColor:i,shadowBlur:r,shadowColor:a}){s.beginPath(),s.arc(this.cameraAdjustX(t[0]),this.cameraAdjustY(t[1]),...t.slice(2)),s.shadowBlur=r,s.shadowColor=a,e&&(s.fillStyle=e,s.fill()),i&&(s.strokeStyle=i,s.stroke())}text({text:t,x:e,y:i,size:r="14px",font:a="Courier",letterSpacing:n=!1,adjusted:o=!0,filter:h}){o&&(e=this.cameraAdjustX(e),i=this.cameraAdjustY(i)),h&&(s.filter=h),s.font=r+" "+a,t=n?t.split("").join(" "):t,s.fillStyle="#fff",s.fillText(t,e,i)}lines({lines:t,shadowBlur:e=0,shadowColor:i,rotation:r,x:a,y:n,fillColor:o,strokeColor:h}){r&&(s.translate(this.cameraAdjustX(a),this.cameraAdjustY(n)),s.rotate(r),s.translate(-1*this.cameraAdjustX(a),-1*this.cameraAdjustY(n))),s.beginPath(),s.moveTo(this.cameraAdjustX(t[0][0]),this.cameraAdjustY(t[0][1])),t.slice(1).map(t=>s.lineTo(this.cameraAdjustX(t[0]),this.cameraAdjustY(t[1]))),s.closePath(),s.shadowBlur=e,s.shadowColor=i,h&&(s.strokeStyle=h,s.stroke()),o&&(s.fillStyle=o,s.fill())}hitbox({x:t,y:e,size:i}){this.rect({rect:[t-i/2,e-i/2,i,i],color:"#f00"})}}let a=document.getElementById("c");class n{constructor(){this.canvas=a}initialize(){let t=document.querySelector("body");const e=e=>{t.clientWidth/t.clientHeight>640/480?(a.style.height="100vh")&&(a.style.width="auto"):(a.style.height="auto")&&(a.style.width="100vw")};e(),t.onresize=e}}var o=class{constructor(){document.addEventListener("keyup",t=>this.onKeyup(t)),document.addEventListener("keydown",t=>this.onKeydown(t)),this._pressed={},this.ENTER=13,this.SPACE=32,this.LEFT=37,this.UP=38,this.RIGHT=39,this.DOWN=40}isDown(t){return this._pressed[t]}onKeydown(t){this._pressed[t.keyCode]=!0}onKeyup(t){delete this._pressed[t.keyCode]}},h=i(0),l=i(2),c=i.n(l);class d{constructor(){(new c.a).onmessage=function(t){let e=t.data,i=document.createElement("audio");i.src=URL.createObjectURL(new Blob([e],{type:"audio/wav"})),i.volume=.5,i.loop=!0,function t(e){e.then(t=>{}).catch(e=>{setTimeout(()=>{let e=i.play();t(e)},1e3)})}(i.play())}}}class f{handle(t,e){return!t.exploding&&!e.exploding&&t.x<e.x+e.size/2&&t.x+t.size>e.x-e.size/2&&t.y<e.y+e.size/2&&t.y+t.size>e.y-e.size/2&&(t.destroy(),e.takeDamage(t),!0)}}let u=[],p=[];function y(t,e){return(t%e+e)%e}class w{constructor({cw:t,ch:e}){for(let i=0;i<100;i++)u.push([Math.random()*t,Math.random()*e,Math.random()]);for(let i=0;i<100;i++)p.push([Math.random()*t,Math.random()*e,Math.random()])}draw(t){t.draw(()=>{t.drawBackground("#111"),u.map(e=>t.rect({rect:[y(e[0]-t.camera.x/(3+3*e[2]),t.canvas.width),y(e[1]-t.camera.y/(3+3*e[2]),t.canvas.height),1,1],fillColor:"rgba(255, 255, 255, 0.6)",adjusted:!1})),p.map(e=>t.rect({rect:[y(e[0]-t.camera.x/(7+3*e[2]),t.canvas.width),y(e[1]-t.camera.y/(7+3*e[2]),t.canvas.height),1,1],fillColor:"rgba(255, 255, 255, 0.3)",adjusted:!1})),t.text({text:"back to earth",x:-145,y:-95,size:"36px",font:"serif",letterSpacing:!0}),t.text({text:"Arrow keys to move. SPACE to shoot.",x:-145,y:105}),t.text({text:"ENTER to land back on earth.",x:-115,y:130}),t.text({text:"Shoot things. Collect ore. Upgrade weapons.",x:-178,y:155})})}}class x{constructor(){this.compasses=[{x:0,y:0,theta:0,color:"#4f4",visible:!1}]}tick(t){this.compasses=this.compasses.map(e=>(e.visible=Math.sqrt(t.getX()*t.getX()+t.getY()*t.getY())>400,e.theta=Math.atan2(t.getY(),t.getX()),e))}draw(t){this.compasses.forEach(e=>e.visible&&t.draw(()=>{t.rect({rect:[-230*Math.cos(e.theta)+320,-230*Math.sin(e.theta)+240,5,5],fillColor:e.color,adjusted:!1})}))}}class m{constructor(){this.timeout=15}tick(t,e,i,s){if(t.isDown(t.ENTER)&&this.timeout<0){if(this.timeout=15,e.landed=!1,e.timeout=15,e.setDx(0),e.setDy(0),i.initializeAsteroids(),e.heal(),e.level>=1)for(let t=0;t<5;t++)s.addEnemy((300+300*Math.random())*(2*Math.round(Math.random())-1)+e.getX(),(300+300*Math.random())*(2*Math.round(Math.random())-1)+e.getY());if(e.level>=2)for(let t=0;t<20;t++)s.addEnemy((300+300*Math.random())*(2*Math.round(Math.random())-1)+e.getX(),(300+300*Math.random())*(2*Math.round(Math.random())-1)+e.getY())}if(this.timeout-=1,t.isDown(t.SPACE)&&this.timeout<0){if(this.timeout=15,e.level>=e.shipLevels.length-1)return;let t=e.shipLevels[e.level+1].cost;e.ore>=t&&(e.ore-=t,e.setLevel(e.level+1))}}draw(t,e){t.draw(()=>{if(t.rect({rect:[0,0,640,480],fillColor:"rgba(0, 0, 0, 0.6)",adjusted:!1}),t.rect({rect:[150,90,340,300],fillColor:"#fff",adjusted:!1}),t.rect({rect:[151,91,338,298],fillColor:"#000",shadowBlur:2,shadowColor:"#fff",adjusted:!1}),t.text({text:"Welcome to Earth",x:210,y:140,size:"20px",font:"serif",letterSpacing:!0,adjusted:!1}),e.level>=e.shipLevels.length-1)t.text({text:"You have all ship upgrades",x:245,y:180,adjusted:!1});else{let i=e.shipLevels[e.level+1].cost;t.text({text:"If you have "+i+" ore,",x:245,y:180,adjusted:!1}),t.text({text:"you may upgrade your ship",x:215,y:205,adjusted:!1}),t.text({text:"by pressing SPACE",x:247,y:230,adjusted:!1}),t.text({text:"You have "+e.ore+" ore",x:260,y:270,adjusted:!1})}t.text({text:"Leave Earth by pressing ENTER",x:195,y:360,adjusted:!1})})}}class g{draw(t){t.draw(()=>{t.text({text:"🌎",x:-65,y:35,size:"100px",color:"blue",filter:"contrast(75%) brightness(60%) saturate(40%) hue-rotate(-10deg)"})})}}let v={"main-laser":{color:"#f66",shadowColor:"#f00",speed:4,lifeSpan:4},"enemy-laser":{color:"#a0f",shadowColor:"#a0f",speed:4,lifeSpan:4},"secondary-laser":{color:"#f6f",shadowColor:"#f0f",speed:10,lifeSpan:1,line:8},missile:{type:"missile",color:"#ff0",shadowColor:"#ff0",speed:.8,lifeSpan:10,maxSpeed:5}};class b{constructor({x:t,y:e,yaw:i,damage:s,type:r,owner:a,target:n}){this.type=v[r],this.x=t,this.y=e,this.yaw=i,this.owner=a,this.lifeSpan=1e3*this.type.lifeSpan/60,this.size=1,this.shouldDie=!1,this.damage=s,this.exploding=!1,this.dx=Math.sin(this.yaw)*this.type.speed,this.dy=-Math.cos(this.yaw)*this.type.speed,this.target=n}tick(){if(this.lifeSpan-=1,this.lifeSpan<=0&&(this.shouldDie=!0),!this.exploding){if("missile"===this.type.type){let t,e;if(this.target&&!this.target.exploding&&this.lifeSpan<1e3*(this.type.lifeSpan-.5)/60){t=this.x-this.target.x,e=this.y-this.target.y;let i=Math.sqrt(t*t+e*e);t=t/i*this.type.speed,e=e/i*this.type.speed}else t=this.dx*-this.type.speed,e=this.dy*-this.type.speed;this.dx-=t,this.dy-=e;let i=Math.sqrt(this.dx*this.dx+this.dy*this.dy);i>this.type.maxSpeed&&(this.dx=this.dx/i*this.type.maxSpeed,this.dy=this.dy/i*this.type.maxSpeed)}this.x+=this.dx,this.y+=this.dy}}destroy(){this.exploding=!0,this.lifeSpan=2}draw(t){t.draw(()=>{this.exploding?t.arc({arc:[this.x,this.y,4/this.lifeSpan,0,2*Math.PI],fillColor:"#ff8",shadowBlur:10,shadowColor:"#ff0"}):this.type.line?t.rect({rect:[this.x,this.y,1,this.type.line],fillColor:this.type.color,shadowBlur:2,shadowColor:this.type.shadowColor,rotation:this.yaw,size:1}):t.rect({rect:[this.x,this.y,2,2],fillColor:this.type.color,shadowBlur:2,shadowColor:this.type.shadowColor})})}}class M{constructor({x:t,y:e,color:i="#fff"}){this.x=t,this.y=e,this.color=i,this.dx=4*Math.random()-2,this.dy=4*Math.random()-2,this.shouldDie=!1,this.exploding=!1}tick(){this.x+=this.dx,this.y+=this.dy}draw(t){t.draw(()=>{t.rect({rect:[this.x,this.y,2,2],fillColor:this.color,shadowBlur:2,shadowColor:this.color})})}}var C=[{draw:(t,e,i,s,r)=>{t.draw(()=>{t.rect({rect:[e-s/2,i-s/2,s,s],fillColor:"#fff",rotation:r,size:s})})},acceleration:.01,turnSpeed:.05,maxSpeed:1,weapons:["enemy-laser"],mainLaserCooldown:.5,health:5,bounty:100,size:20},{draw:(t,e,i,s,r)=>{t.draw(()=>{t.rect({rect:[e-s/2,i-s/2,s,s],fillColor:"#fff",rotation:r,size:s})})},acceleration:.05,turnSpeed:.1,maxSpeed:1.5,weapons:["enemy-laser"],mainLaserCooldown:.5,health:5,bounty:100,size:10}];class S{constructor(t,e,i){this.x=e,this.y=i,this.dx=0,this.dy=0,this.yaw=0,this.shouldDie=!1,this.exploding=!1,this.type=t,this.projectiles=[],this.size=t.size,this.acceleration=t.acceleration,this.maxSpeed=t.maxSpeed,this.turnSpeed=t.turnSpeed,this.health=t.health,this.bounty=t.bounty,this.engineOn=!0,this.mainLaserCanFire=t.weapons.includes("enemy-laser"),this.mainLaserCooldown=t.mainLaserCooldown}takeDamage({damage:t,dx:e,dy:i,owner:s}){this.dx+=e/30,this.dy+=i/30,this.health-=t,this.health<=0&&(this.exploding=!0,this.debris=Array(20).fill().map(t=>new M({x:this.x,y:this.y,color:"#aa3"})).concat(Array(20).fill().map(t=>new M({x:this.x,y:this.y,color:"#a33"}))),this.lifeSpan=80,s.ore+=this.bounty)}weaponsTick(t){this.mainLaserCanFire&&(this.projectiles.push(new b({x:this.x,y:this.y,yaw:this.yaw,damage:1,type:"enemy-laser",owner:this})),this.mainLaserCanFire=!1,window.setTimeout(()=>this.mainLaserCanFire=!0,1e3*this.mainLaserCooldown),t.enemyLaser())}tick(t,e){if(this.projectiles.map(t=>t.tick()),this.projectiles=this.projectiles.filter(t=>!t.shouldDie),this.exploding)this.lifeSpan-=1,this.debris.map(t=>t.tick()),this.lifeSpan<=0&&(this.shouldDie=!0);else{let i=Math.atan2(e.getX()-this.x,-e.getY()+this.y);if(this.yaw+=this.yaw-i>0?-this.turnSpeed:this.turnSpeed,this.yaw%=2*Math.PI,this.engineOn=!0,this.engineOn){this.dx+=Math.sin(this.yaw)*this.acceleration,this.dy+=Math.cos(this.yaw)*-this.acceleration;let t=Math.sqrt(this.dx*this.dx+this.dy*this.dy);t>this.maxSpeed&&(this.dx=this.dx/t*this.maxSpeed,this.dy=this.dy/t*this.maxSpeed)}let s=Math.sqrt((this.x-e.x)*(this.x-e.x)+(this.y-e.y)*(this.y-e.y));!e.exploding&&s<320&&this.weaponsTick(t,[e])}this.x+=this.dx,this.y+=this.dy}draw(t){this.projectiles.map(e=>e.draw(t)),this.exploding?(this.debris.map(e=>e.draw(t)),t.draw(()=>{t.arc({arc:[this.x+20*Math.random()-10,this.y+20*Math.random()-10,2+6*Math.random(),0,2*Math.PI],strokeColor:"rgb(255,"+Math.floor(155*Math.random()+100)+","+Math.floor(50*Math.random())+")",shadowBlur:10,shadowColor:"#f00"})})):this.type.draw(t,this.x,this.y,this.size,this.yaw)}}class j{constructor(){this.enemies=[]}addEnemy(t,e){let i=Math.floor(2*Math.random());this.enemies.push(new S(C[i],t,e))}tick(t,e){this.enemies.forEach(i=>i.tick(t,e)),this.enemies=this.enemies.filter(t=>!t.shouldDie)}draw(t){this.enemies.forEach(e=>e.draw(t))}}class _{tick(){}draw(t){t.draw(()=>{t.drawBackground("rgba(0,0,0,0.85)"),t.text({text:"game over",x:170,y:200,size:"48px",font:"serif",adjusted:!1,letterSpacing:!0})})}}class k{constructor(){this.ore=0}tick(t){this.health=t.health,this.maxHealth=t.maxHealth,this.ore=t.ore}draw(t){t.draw(()=>{t.rect({rect:["270","10",100,5],strokeColor:"#fff",adjusted:!1})}),t.draw(()=>{let e=this.health/this.maxHealth;if(t.rect({rect:["270","10",100*e,5],fillColor:`rgb(${200-255*e}, ${200*e}, 0)`,adjusted:!1}),this.ore>-10){let e=`ore: ${this.ore}`;t.text({text:e,x:"299"-3.5*(e.length-6),y:"30",size:"11px",adjusted:!1})}})}}var O=[{turnSpeed:.05,maxSpeed:1,acceleration:.01,size:10,mainLaserCooldown:.3,mainLaserCanFire:!0,maxHealth:10},{cost:100,turnSpeed:.07,maxSpeed:2,acceleration:.03,size:15,mainLaserCooldown:.3,mainLaserCanFire:!0,secondaryLaserCooldown:.2,secondaryLaserCanFire:!0,maxHealth:20},{cost:400,turnSpeed:.09,maxSpeed:3,acceleration:.2,size:20,mainLaserCooldown:.3,mainLaserCanFire:!0,secondaryLaserCooldown:.2,secondaryLaserCanFire:!0,missileCooldown:.2,missileCanFire:!0,maxHealth:40}];i(4);let E=3.4,L=.05,A=1,P=.01,D=10,z=.3,B=!0,I=!1,T=1,R=.2,U=!1,q=1,H=.2,N={engineOn:!1},F=0;function W(t,e,i,s){let r=null,a=99999999;return i.forEach(i=>{if(i.exploding)return;let n=i.x-t,o=i.y-e,h=Math.sqrt(n*n+o*o);h>s||h<a&&(r=i,a=h)}),r}class Y{constructor(){this.x=100,this.y=-400,this.dx=-.1,this.dy=.5,this.projectiles=[],this.landed=!1,this.ore=0,this.timeout=0,this.level=0,this.shipLevels=O,this.maxHealth=10,this.health=10,this.exploding=!1,this.size=D}getX(){return this.x}getY(){return this.y}setDx(t){this.dx=t}setDy(t){this.dy=t}takeDamage({damage:t,dx1:e,dy1:i}){this.health-=t,this.health<=0&&(this.exploding=!0,this.debris=Array(100).fill().map(t=>new M({x:this.x,y:this.y,color:"#aa3"})).concat(Array(100).fill().map(t=>new M({x:this.x,y:this.y,color:"#a33"}))),this.lifeSpan=80)}heal(){this.health=O[this.level].maxHealth}setLevel(t){({turnSpeed:L,maxSpeed:A,acceleration:P,size:D,mainLaserCooldown:z,mainLaserCanFire:B,secondaryLaserCooldown:R,secondaryLaserCanFire:I,missileCooldown:H,missileCanFire:U}=O[t]),this.maxHealth=O[t].maxHealth,this.level=t}weaponsTick(t,e,i){t.isDown(t.SPACE)&&(B&&(this.projectiles.push(new b({x:this.x,y:this.y,yaw:E,damage:1,type:"main-laser",owner:this})),B=!1,window.setTimeout(()=>B=!0,1e3*z),e.mainLaser()),I&&(this.projectiles.push(new b({x:T*Math.cos(E)*(D/2)+this.x,y:T*Math.sin(E)*(D/2)+this.y,yaw:E,damage:1,type:"secondary-laser",owner:this})),T*=-1,I=!1,window.setTimeout(()=>I=!0,1e3*R),e.secondaryLaser()),U&&(this.projectiles.push(new b({x:q*Math.cos(E)*(D/2)+this.x,y:q*Math.sin(E)*(D/2)+this.y,yaw:E+Math.PI/2*q,damage:1,type:"missile",owner:this,target:W(this.x,this.y,i,260)})),q*=-1,U=!1,window.setTimeout(()=>U=!0,1e3*H),e.missile()))}tick(t,e,i,s){if(this.projectiles.map(t=>t.tick()),this.projectiles=this.projectiles.filter(t=>!t.shouldDie),this.exploding)this.lifeSpan-=1,this.debris.map(t=>t.tick()),this.lifeSpan<=0&&(this.death=!0);else{if(this.timeout<0&&t.isDown(t.ENTER)&&(this.landed=!0),this.timeout-=1,F+=1,t.isDown(t.LEFT)&&(E-=L),t.isDown(t.RIGHT)&&(E+=L),N.engineOn=t.isDown(t.UP),N.engineOn){this.dx+=Math.sin(E)*P,this.dy+=Math.cos(E)*-P;let t=Math.sqrt(this.dx*this.dx+this.dy*this.dy);t>A&&(this.dx=this.dx/t*A,this.dy=this.dy/t*A),e.engineOn()}else e.engineOff();this.weaponsTick(t,e,s),this.x+=this.dx,this.y+=this.dy,i.camera.x=this.x,i.camera.y=this.y}}draw(t){if(this.projectiles.map(e=>e.draw(t)),this.exploding)this.debris.map(e=>e.draw(t)),t.draw(()=>{t.arc({arc:[this.x+20*Math.random()-10,this.y+20*Math.random()-10,2+6*Math.random(),0,2*Math.PI],strokeColor:"rgb(255,"+Math.floor(155*Math.random()+100)+","+Math.floor(50*Math.random())+")",shadowBlur:10,shadowColor:"#f00"})});else{N.engineOn&&this.drawEngine(t);let e=this.x*this.x+this.y*this.y;e<3600&&this.drawHalo(t,e),t.draw(()=>{t.lines({x:this.x,y:this.y,lines:[[this.x,this.y-7],[this.x+5,this.y+5],[this.x-5,this.y+5]],rotation:E,fillColor:"#070"})})}}drawEngine(t){t.draw(()=>{t.lines({x:this.x,y:this.y,lines:[[this.x+-.5*D,this.y+.5*D],[this.x+.5*D,this.y+.5*D],[this.x,this.y+.5*D+5*Math.random()],[this.x+-.5*D,this.y+.5*D]],rotation:E,fillColor:"orange"})})}drawHalo(t,e){t.draw(()=>{t.arc({arc:[this.x,this.y,4*e/60+Math.sin(F/8)+10,0,2*Math.PI],strokeColor:`rgba(255, 255, 255, ${1-e/3600})`})})}}const X=[[[-6,-10],[2,-10],[10,-7],[10,-5],[2,0],[10,3],[4,10],[1,8],[-6,10],[-10,2],[-10,-5],[-5,-5]],[[-5,-10],[0,-7],[5,-10],[10,-3],[5,0],[9,5],[4,10],[-3,7],[-7,9],[-10,5],[-7,0],[-9,-6]]];class K{constructor({x:t,y:e}){this.x=t,this.y=e,this.dx=0,this.dy=0,this.asteroidStyle=Math.floor(Math.random()*X.length),this.rotation=Math.random()*Math.PI,this.turnSpeed=.03*Math.random(),this.size=20,this.health=3,this.shouldDie=!1,this.exploding=!1}takeDamage({damage:t,dx:e,dy:i,owner:s}){this.dx+=e/30,this.dy+=i/30,this.health-=t,this.health<=0&&(this.exploding=!0,this.debris=Array(20).fill().map(t=>new M({x:this.x,y:this.y})),this.lifeSpan=50,s.ore+=10)}tick(){this.exploding&&(this.lifeSpan-=1,this.debris.map(t=>t.tick()),this.lifeSpan<=0&&(this.shouldDie=!0)),this.x+=this.dx,this.y+=this.dy,this.rotation+=this.turnSpeed}draw(t){t.draw(()=>{this.exploding?this.debris.map(e=>e.draw(t)):t.lines({lines:X[this.asteroidStyle].map(t=>[this.x+t[0],this.y+t[1]]),strokeColor:"#fff",shadowBlur:8,shadowColor:"#fff",rotation:this.rotation,x:this.x,y:this.y})})}}class G{constructor(){this.initializeAsteroids()}initializeAsteroids(){this.asteroids=[];for(let t=0;t<40;t++){let t=Math.random()*Math.PI*2,e=Math.sin(t)*(210+400*Math.random()),i=Math.cos(t)*(210+400*Math.random());this.asteroids.push(new K({x:e,y:i}))}}tick(){this.asteroids.forEach(t=>t.tick()),this.asteroids=this.asteroids.filter(t=>!t.shouldDie)}draw(t){this.asteroids.map(e=>e.draw(t))}}window.onload=()=>{const t=new n,e=new r(t.canvas),i=new o,s=new h.a,a=new f;t.initialize();let l=(new Date).getTime(),c=0,u=0,p=()=>{y(),v(),b()},y=()=>{D.landed?E.tick(i,D,z,A):(O.tick(D),S.tick(D),A.tick(s,D),D.tick(i,s,e,z.asteroids.concat(A.enemies)),z.tick())},v=()=>{D.projectiles.forEach(t=>{z.asteroids.forEach(e=>{a.handle(t,e)&&s.projectileHit()}),A.enemies.forEach(e=>{a.handle(t,e)&&s.projectileHit()})}),A.enemies.forEach(t=>{t.projectiles.forEach(t=>{a.handle(t,D)&&s.projectileHit(),z.asteroids.forEach(e=>{a.handle(t,e)&&s.projectileHit()})})})},b=()=>{window.requestAnimationFrame(p),c=(new Date).getTime(),(u=c-l)>1e3/60&&(e.clearBackground(),M().map(t=>t.draw(e)),D.landed&&E.draw(e,D),D.death&&P.draw(e),l=c-u%(1e3/60))},M=()=>[C,L,z,A,D,S,O];const C=new w({cw:t.canvas.width,ch:t.canvas.height}),S=new x,O=new k,E=new m,L=new g,A=new j,P=new _,D=(new d,new Y),z=new G;document.querySelector("main").className+=" loaded",p()}}]);</script>