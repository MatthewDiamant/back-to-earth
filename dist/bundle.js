!function(e){var t={};function s(i){if(t[i])return t[i].exports;var a=t[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=e,s.c=t,s.d=function(e,t,i){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)s.d(i,a,function(t){return e[t]}.bind(null,a));return i},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=2)}([function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return Sound});var jsfxr__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),jsfxr__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(jsfxr__WEBPACK_IMPORTED_MODULE_0__);class Oscillator{constructor(){window.AudioContext=window.AudioContext||window.webkitAudioContext;let e=new AudioContext;this.oscillator=e.createOscillator(),this.gainNode=e.createGain(),this.oscillator.connect(this.gainNode),this.gainNode.connect(e.destination),this.gainNode.gain.value=0,this.oscillator.start(0)}on({frequency:e,type:t,volume:s}){this.oscillator.type=t,this.gainNode.gain.value=s,this.oscillator.frequency.value=e}off(){this.gainNode.gain.value=0}kill(){this.oscillator.stop(0)}play({volume:e,frequency:t,duration:s,type:i}){this.oscillator.type=i,this.oscillator.frequency.value=t,this.gainNode.gain.value=e,setTimeout(()=>this.gainNode.gain.value=0,s)}}class Sound{constructor(){this.state={engine:!1}}engineOn(){this.state.engine||(this.state.engine=!0,this.engine=this.engine||new Oscillator,this.engine.on({frequency:50,type:"triangle",volume:.2}))}engineOff(){this.state.engine&&(this.state.engine=!1,this.engine.off(),this.engine=null)}playSound(url){const soundUrl=jsfxr__WEBPACK_IMPORTED_MODULE_0___default()(eval(url));let player=new Audio;player.src=soundUrl,player.play()}mainLaser(){this.playSound("[2,,0.1749,,0.3063,0.713,0.2,-0.2645,,,,,,0.0543,0.1546,,,,1,,,,,0.5]")}secondaryLaser(){this.playSound("[2,,0.1426,,0.2251,0.7799,0.2555,-0.2285,,,,,,0.7631,-0.4501,,,,1,,,0.0846,,0.5]")}missile(){this.playSound("[3,,0.0937,0.571,0.3803,0.7495,,,,,,,,,,,,,1,,,,,0.5]")}projectileHit(){this.playSound("[3,,0.0867,,0.2283,0.2711,,-0.6853,,,,,,,,,,,1,,,,,0.5]")}}},function(e,t,s){function i(){this.setSettings=function(e){for(var t=0;t<24;t++)this[String.fromCharCode(97+t)]=e[t]||0;this.c<.01&&(this.c=.01);var s=this.b+this.c+this.e;if(s<.18){var i=.18/s;this.b*=i,this.c*=i,this.e*=i}}}var a=new function(){var e,t,s,a,r,o,n,l,h,d,c,u;this._params=new i,this.reset=function(){var e=this._params;a=100/(e.f*e.f+.001),r=100/(e.g*e.g+.001),o=1-e.h*e.h*e.h*.01,n=-e.i*e.i*e.i*1e-6,e.a||(c=.5-e.n/2,u=5e-5*-e.o),l=1+e.l*e.l*(e.l>0?-.9:10),h=0,d=1==e.m?0:(1-e.m)*(1-e.m)*2e4+32},this.totalReset=function(){this.reset();var i=this._params;return e=i.b*i.b*1e5,t=i.c*i.c*1e5,s=i.e*i.e*1e5+12,3*((e+t+s)/3|0)},this.synthWave=function(i,f){var p=this._params,y=1!=p.s||p.v,w=p.v*p.v*.1,m=1+3e-4*p.w,x=p.s*p.s*p.s*.1,g=1+1e-4*p.t,v=1!=p.s,_=p.x*p.x,S=p.g,C=p.q||p.r,j=p.r*p.r*p.r*.2,k=p.q*p.q*(p.q<0?-1020:1020),M=p.p?32+((1-p.p)*(1-p.p)*2e4|0):0,b=p.d,E=p.j/2,A=p.k*p.k*.01,L=p.a,D=e,P=1/e,O=1/t,R=1/s,U=5/(1+p.u*p.u*20)*(.01+x);U>.8&&(U=.8),U=1-U;for(var T,q,z,B,N,Y,I=!1,F=0,X=0,W=0,K=0,H=0,G=0,J=0,Q=0,V=0,Z=0,$=new Array(1024),ee=new Array(32),te=$.length;te--;)$[te]=0;for(te=ee.length;te--;)ee[te]=2*Math.random()-1;for(te=0;te<f;te++){if(I)return te;if(M&&++V>=M&&(V=0,this.reset()),d&&++h>=d&&(d=0,a*=l),(a*=o+=n)>r&&(a=r,S>0&&(I=!0)),q=a,E>0&&(Z+=A,q*=1+Math.sin(Z)*E),(q|=0)<8&&(q=8),L||((c+=u)<0?c=0:c>.5&&(c=.5)),++X>D)switch(X=0,++F){case 1:D=t;break;case 2:D=s}switch(F){case 0:W=X*P;break;case 1:W=1+2*(1-X*O)*b;break;case 2:W=1-X*R;break;case 3:W=0,I=!0}C&&((z=0|(k+=j))<0?z=-z:z>1023&&(z=1023)),y&&m&&((w*=m)<1e-5?w=1e-5:w>.1&&(w=.1)),Y=0;for(var se=8;se--;){if(++J>=q&&(J%=q,3==L))for(var ie=ee.length;ie--;)ee[ie]=2*Math.random()-1;switch(L){case 0:N=J/q<c?.5:-.5;break;case 1:N=1-J/q*2;break;case 2:N=.225*(((N=1.27323954*(B=6.28318531*((B=J/q)>.5?B-1:B))+.405284735*B*B*(B<0?1:-1))<0?-1:1)*N*N-N)+N;break;case 3:N=ee[Math.abs(32*J/q|0)]}y&&(T=G,(x*=g)<0?x=0:x>.1&&(x=.1),v?(H+=(N-G)*x,H*=U):(G=N,H=0),K+=(G+=H)-T,N=K*=1-w),C&&($[Q%1024]=N,N+=$[(Q-z+1024)%1024],Q++),Y+=N}Y*=.125*W*_,i[te]=Y>=1?32767:Y<=-1?-32768:32767*Y|0}return f}};e.exports=function(e){a._params.setSettings(e);var t=a.totalReset(),s=new Uint8Array(4*((t+1)/2|0)+44),i=2*a.synthWave(new Uint16Array(s.buffer,44),t),r=new Uint32Array(s.buffer,0,44);r[0]=1179011410,r[1]=i+36,r[2]=1163280727,r[3]=544501094,r[4]=16,r[5]=65537,r[6]=44100,r[7]=88200,r[8]=1048578,r[9]=1635017060,r[10]=i,i+=44;for(var o=0,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l="data:audio/wav;base64,";o<i;o+=3){var h=s[o]<<16|s[o+1]<<8|s[o+2];l+=n[h>>18]+n[h>>12&63]+n[h>>6&63]+n[63&h]}return l}},function(e,t,s){"use strict";s.r(t);let i=null;class a{constructor(e){this.canvas=e,i=this.canvas.getContext("2d"),this.camera={x:0,y:0}}cameraAdjustX(e){return e-this.camera.x+this.canvas.width/2}cameraAdjustY(e){return e-this.camera.y+this.canvas.height/2}draw(e){i.save(),e(),i.restore()}clearBackground(){i.clearRect(0,0,this.canvas.width,this.canvas.height)}drawBackground(e){i.fillStyle=e,i.fillRect(0,0,this.canvas.width,this.canvas.height)}fillRect({rect:e,color:t,shadowBlur:s,shadowColor:a}){i.fillStyle=t,i.shadowBlur=s,i.shadowColor=a,i.fillRect(this.cameraAdjustX(e[0]),this.cameraAdjustY(e[1]),...e.slice(2))}fillRectUnadjusted({rect:e,color:t}){i.fillStyle=t,i.fillRect(...e)}arc({arc:e,fillColor:t,strokeColor:s,shadowBlur:a,shadowColor:r}){i.beginPath(),i.arc(this.cameraAdjustX(e[0]),this.cameraAdjustY(e[1]),...e.slice(2)),i.shadowBlur=a,i.shadowColor=r,t&&(i.fillStyle=t,i.fill()),s&&(i.strokeStyle=s,i.stroke())}text({text:e,x:t,y:s,size:a="14px",font:r="Courier",letterSpacing:o=!1,isUnadjusted:n=!1}){n||(t=this.cameraAdjustX(t),s=this.cameraAdjustY(s)),i.font=a+" "+r,e=o?e.split("").join(" "):e,i.fillStyle="#fff",i.fillText(e,t,s)}lines({lines:e,shadowBlur:t=0,shadowColor:s,rotation:a,x:r,y:o,fillColor:n,strokeColor:l}){a&&(i.translate(this.cameraAdjustX(r),this.cameraAdjustY(o)),i.rotate(a),i.translate(-1*this.cameraAdjustX(r),-1*this.cameraAdjustY(o))),i.beginPath(),i.moveTo(this.cameraAdjustX(e[0][0]),this.cameraAdjustY(e[0][1])),e.slice(1).map(e=>i.lineTo(this.cameraAdjustX(e[0]),this.cameraAdjustY(e[1]))),i.closePath(),i.shadowBlur=t,i.shadowColor=s,l&&(i.strokeStyle=l,i.stroke()),n&&(i.fillStyle=n,i.fill())}hitbox({x:e,y:t,size:s}){this.fillRect({rect:[e-s/2,t-s/2,s,s],color:"#f00"})}}let r=document.getElementById("c");class o{constructor(){this.canvas=r}initialize(){let e=document.querySelector("body");const t=t=>{e.clientWidth/e.clientHeight>640/480?(r.style.height="100vh")&&(r.style.width="auto"):(r.style.height="auto")&&(r.style.width="100vw")};t(),e.onresize=t}}var n=class{constructor(){document.addEventListener("keyup",e=>this.onKeyup(e)),document.addEventListener("keydown",e=>this.onKeydown(e)),this._pressed={},this.ENTER=13,this.SPACE=32,this.LEFT=37,this.UP=38,this.RIGHT=39,this.DOWN=40}isDown(e){return this._pressed[e]}onKeydown(e){this._pressed[e.keyCode]=!0}onKeyup(e){delete this._pressed[e.keyCode]}},l=s(0);class h{handle(e,t){return!e.exploding&&!t.exploding&&e.x<t.x+t.size/2&&e.x+e.size>t.x-t.size/2&&e.y<t.y+t.size/2&&e.y+e.size>t.y-t.size/2&&(e.destroy(),t.takeDamage(e),!0)}}let d=[];class c{constructor({cw:e,ch:t}){for(let s=0;s<100;s++)d.push([Math.random()*e,Math.random()*t])}draw(e){e.draw(()=>{e.drawBackground("#111"),d.map(t=>e.fillRectUnadjusted({rect:[t[0],t[1],1,1],color:"#fff"})),e.text({text:"back to earth",x:-140,y:-100,size:"36px",font:"serif",letterSpacing:!0}),e.text({text:"Arrow keys to move. SPACE to shoot.",x:-140,y:100}),e.text({text:"ENTER to land back on earth.",x:-110,y:125}),e.text({text:"Shoot things. Collect ore. Upgrade weapons.",x:-173,y:150})})}}class u{constructor(){this.compasses=[{x:0,y:0,theta:0,color:"#4f4",visible:!1}]}tick(e){this.compasses=this.compasses.map(t=>(t.visible=Math.sqrt(e.getX()*e.getX()+e.getY()*e.getY())>400,t.theta=Math.atan2(e.getY(),e.getX()),t))}draw(e){this.compasses.forEach(t=>t.visible&&e.draw(()=>{e.fillRectUnadjusted({rect:[-230*Math.cos(t.theta)+320,-230*Math.sin(t.theta)+240,5,5],color:t.color})}))}}class f{constructor(){this.timeout=15}tick(e,t){if(e.isDown(e.ENTER)&&this.timeout<0&&(this.timeout=15,t.landed=!1,t.timeout=15),this.timeout-=1,e.isDown(e.SPACE)&&this.timeout<0){if(this.timeout=15,t.level>=t.shipLevels.length-1)return;let e=t.shipLevels[t.level+1].cost;t.ore>=e&&(t.ore-=e,t.setLevel(t.level+1))}}draw(e,t){e.draw(()=>{if(e.fillRectUnadjusted({rect:[0,0,640,480],color:"rgba(0, 0, 0, 0.6)"}),e.fillRectUnadjusted({rect:[150,90,340,300],color:"#fff"}),e.fillRectUnadjusted({rect:[151,91,338,298],color:"#000",shadowBlur:2,shadowColor:"#fff"}),e.text({text:"Welcome to Earth",x:210,y:140,size:"20px",font:"serif",letterSpacing:!0,isUnadjusted:!0}),t.level>=t.shipLevels.length-1)e.text({text:"You have all ship upgrades",x:245,y:180,isUnadjusted:!0});else{let s=t.shipLevels[t.level+1].cost;e.text({text:"If you have "+s+" ore,",x:245,y:180,isUnadjusted:!0}),e.text({text:"you may upgrade your ship",x:215,y:205,isUnadjusted:!0}),e.text({text:"by pressing SPACE",x:247,y:230,isUnadjusted:!0}),e.text({text:"You have "+t.ore+" ore",x:260,y:270,isUnadjusted:!0})}e.text({text:"Leave Earth by pressing ENTER",x:195,y:360,isUnadjusted:!0})})}}class p{draw(e){e.draw(()=>{e.arc({arc:[0,0,50,0,2*Math.PI],fillColor:"#fff",shadowBlur:10,shadowColor:"#fff"})})}}class y{constructor(){this.ore=0}tick(e){this.ore=e.ore}draw(e){e.draw(()=>{this.ore>0&&e.text({text:"ore: "+this.ore,x:"305",y:"20",size:"11px",isUnadjusted:!0})})}}let w={"main-laser":{color:"#f66",shadowColor:"#f00",speed:4,lifeSpan:4},"secondary-laser":{color:"#f6f",shadowColor:"#f0f",speed:10,lifeSpan:1},missile:{type:"missile",color:"#ff0",shadowColor:"#ff0",speed:.8,lifeSpan:10,maxSpeed:5}};class m{constructor({x:e,y:t,yaw:s,damage:i,type:a,owner:r,target:o}){this.type=w[a],this.x=e,this.y=t,this.yaw=s,this.owner=r,this.lifeSpan=1e3*this.type.lifeSpan/60,this.size=1,this.shouldDie=!1,this.damage=i,this.exploding=!1,this.dx=Math.sin(this.yaw)*this.type.speed,this.dy=-Math.cos(this.yaw)*this.type.speed,this.target=o}tick(){if(this.lifeSpan-=1,this.lifeSpan<=0&&(this.shouldDie=!0),!this.exploding){if("missile"===this.type.type){let e,t;if(this.target&&!this.target.exploding&&this.lifeSpan<1e3*(this.type.lifeSpan-.5)/60){e=this.x-this.target.x,t=this.y-this.target.y;let s=Math.sqrt(e*e+t*t);e=e/s*this.type.speed,t=t/s*this.type.speed}else e=this.dx*-this.type.speed,t=this.dy*-this.type.speed;this.dx-=e,this.dy-=t;let s=Math.sqrt(this.dx*this.dx+this.dy*this.dy);s>this.type.maxSpeed&&(this.dx=this.dx/s*this.type.maxSpeed,this.dy=this.dy/s*this.type.maxSpeed)}this.x+=this.dx,this.y+=this.dy}}destroy(){this.exploding=!0,this.lifeSpan=2}draw(e){e.draw(()=>{this.exploding?e.arc({arc:[this.x,this.y,4/this.lifeSpan,0,2*Math.PI],fillColor:"#ff8",shadowBlur:10,shadowColor:"#ff0"}):e.fillRect({rect:[this.x,this.y,2,2],color:this.type.color,shadowBlur:2,shadowColor:this.type.shadowColor})})}}let x=[{turnSpeed:.05,maxSpeed:1,acceleration:.01,size:10,mainLaserCooldown:.3,mainLaserCanFire:!0},{cost:100,turnSpeed:.05,maxSpeed:1,acceleration:.01,size:15,mainLaserCooldown:.3,mainLaserCanFire:!0,secondaryLaserCooldown:.2,secondaryLaserCanFire:!0},{cost:400,turnSpeed:.05,maxSpeed:1,acceleration:.01,size:20,mainLaserCooldown:.3,mainLaserCanFire:!0,secondaryLaserCooldown:.2,secondaryLaserCanFire:!0,missileCooldown:.2,missileCanFire:!0}],g=100,v=-400,_=-.1,S=.5,C=3.4,j=.05,k=1,M=.01,b=10,E=.3,A=!0,L=!1,D=1,P=.2,O=!1,R=1,U=.2,T={engineOn:!1};function q(e,t,s,i){let a=null,r=99999999;return s.forEach(s=>{if(s.exploding)return;let o=s.x-e,n=s.y-t,l=Math.sqrt(o*o+n*n);l>i||l<r&&(a=s,r=l)}),a}class z{constructor(){this.projectiles=[],this.landed=!1,this.ore=0,this.timeout=0,this.level=0,this.shipLevels=x}getX(){return g}getY(){return v}setLevel(e){({turnSpeed:j,maxSpeed:k,acceleration:M,size:b,mainLaserCooldown:E,mainLaserCanFire:A,secondaryLaserCooldown:P,secondaryLaserCanFire:L,missileCooldown:U,missileCanFire:O}=x[e]),this.level=e}weaponsTick(e,t,s){e.isDown(e.SPACE)&&(A&&(this.projectiles.push(new m({x:g,y:v,yaw:C,damage:1,type:"main-laser",owner:this})),A=!1,window.setTimeout(()=>A=!0,1e3*E),t.mainLaser()),L&&(this.projectiles.push(new m({x:D*Math.cos(C)*(b/2)+g,y:D*Math.sin(C)*(b/2)+v,yaw:C,damage:1,type:"secondary-laser",owner:this})),D*=-1,L=!1,window.setTimeout(()=>L=!0,1e3*P),t.secondaryLaser()),O&&(this.projectiles.push(new m({x:R*Math.cos(C)*(b/2)+g,y:R*Math.sin(C)*(b/2)+v,yaw:C+Math.PI/2*R,damage:1,type:"missile",owner:this,target:q(g,v,s,260)})),R*=-1,O=!1,window.setTimeout(()=>O=!0,1e3*U),t.missile()))}tick(e,t,s,i){if(this.timeout<0&&e.isDown(e.ENTER)&&g*g+v*v<3600&&(this.landed=!0),this.timeout-=1,e.isDown(e.LEFT)&&(C-=j),e.isDown(e.RIGHT)&&(C+=j),T.engineOn=e.isDown(e.UP),T.engineOn){_+=Math.sin(C)*M,S+=Math.cos(C)*-M;let e=Math.sqrt(_*_+S*S);e>k&&(_=_/e*k,S=S/e*k),t.engineOn()}else t.engineOff();this.weaponsTick(e,t,i),g+=_,v+=S,s.camera.x=g,s.camera.y=v,this.projectiles.map(e=>e.tick()),this.projectiles=this.projectiles.filter(e=>!e.shouldDie)}draw(e){this.projectiles.map(t=>t.draw(e)),T.engineOn&&this.drawEngine(e),e.draw(()=>{e.lines({x:g,y:v,lines:[[g,v-7],[g+5,v+5],[g-5,v+5]],size:b,rotation:C,fillColor:"#070"})})}drawEngine(e){e.draw(()=>{e.lines({x:g,y:v,lines:[[g+-.5*b,v+.5*b],[g+.5*b,v+.5*b],[g,v+.5*b+5*Math.random()],[g+-.5*b,v+.5*b]],rotation:C,fillColor:"orange"})})}}const B=[[[-6,-10],[2,-10],[10,-7],[10,-5],[2,0],[10,3],[4,10],[1,8],[-6,10],[-10,2],[-10,-5],[-5,-5]],[[-5,-10],[0,-7],[5,-10],[10,-3],[5,0],[9,5],[4,10],[-3,7],[-7,9],[-10,5],[-7,0],[-9,-6]]];class N{constructor({x:e,y:t}){this.x=e,this.y=t,this.dx=4*Math.random()-2,this.dy=4*Math.random()-2,this.shouldDie=!1,this.exploding=!1}tick(){this.x+=this.dx,this.y+=this.dy}draw(e){e.draw(()=>{e.fillRect({rect:[this.x,this.y,2,2],color:"#fff",shadowBlur:2,shadowColor:"#fff"})})}}class Y{constructor({x:e,y:t}){this.x=e,this.y=t,this.dx=0,this.dy=0,this.asteroidStyle=Math.floor(Math.random()*B.length),this.rotation=Math.random()*Math.PI,this.turnSpeed=.03*Math.random(),this.size=20,this.health=3,this.shouldDie=!1,this.exploding=!1}takeDamage({damage:e,dx:t,dy:s,owner:i}){this.dx+=t/30,this.dy+=s/30,this.health-=e,this.health<=0&&(this.exploding=!0,this.debris=Array(20).fill().map(e=>new N({x:this.x,y:this.y})),this.lifeSpan=50,i.ore+=10)}tick(){this.exploding&&(this.lifeSpan-=1,this.debris.map(e=>e.tick()),this.lifeSpan<=0&&(this.shouldDie=!0)),this.x+=this.dx,this.y+=this.dy,this.rotation+=this.turnSpeed}draw(e){e.draw(()=>{this.exploding?this.debris.map(t=>t.draw(e)):e.lines({lines:B[this.asteroidStyle].map(e=>[this.x+e[0],this.y+e[1]]),strokeColor:"#fff",shadowBlur:8,shadowColor:"#fff",rotation:this.rotation,x:this.x,y:this.y})})}}class I{constructor(){this.asteroids=[];for(let e=0;e<40;e++){let e=Math.random()*Math.PI*2,t=Math.sin(e)*(210+400*Math.random()),s=Math.cos(e)*(210+400*Math.random());this.asteroids.push(new Y({x:t,y:s}))}}tick(){this.asteroids.forEach(e=>e.tick()),this.asteroids=this.asteroids.filter(e=>!e.shouldDie)}draw(e){this.asteroids.map(t=>t.draw(e))}}window.onload=()=>{document.querySelector("main").className+=" loaded";const e=new o,t=new a(e.canvas),s=new n,i=new l.a,r=new h;e.initialize();let d=(new Date).getTime(),w=0,m=0,x=()=>{g(),v(),_()},g=()=>{E.landed?M.tick(s,E):(k.tick(E),j.tick(E),E.tick(s,i,t,A.asteroids),A.tick())},v=()=>{E.projectiles.forEach(e=>{A.asteroids.forEach(t=>{r.handle(e,t,i)&&i.projectileHit()})})},_=()=>{window.requestAnimationFrame(x),w=(new Date).getTime(),(m=w-d)>1e3/60&&(t.clearBackground(),S().map(e=>e.draw(t)),E.landed&&M.draw(t,E),d=w-m%(1e3/60))},S=()=>[C,b,A,E,j,k];const C=new c({cw:e.canvas.width,ch:e.canvas.height}),j=new u,k=new y,M=new f,b=new p,E=new z,A=new I;x()}}]);