!function(t){var e={};function s(i){if(e[i])return e[i].exports;var a=e[i]={i:i,l:!1,exports:{}};return t[i].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=t,s.c=e,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)s.d(i,a,function(e){return t[e]}.bind(null,a));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=2)}([function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return Sound});var jsfxr__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),jsfxr__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(jsfxr__WEBPACK_IMPORTED_MODULE_0__);class Oscillator{constructor(){window.AudioContext=window.AudioContext||window.webkitAudioContext;let t=new AudioContext;this.oscillator=t.createOscillator(),this.gainNode=t.createGain(),this.oscillator.connect(this.gainNode),this.gainNode.connect(t.destination),this.gainNode.gain.value=0,this.oscillator.start(0)}on({frequency:t,type:e,volume:s}){this.oscillator.type=e,this.gainNode.gain.value=s,this.oscillator.frequency.value=t}off(){this.gainNode.gain.value=0}kill(){this.oscillator.stop(0)}play({volume:t,frequency:e,duration:s,type:i}){this.oscillator.type=i,this.oscillator.frequency.value=e,this.gainNode.gain.value=t,setTimeout(()=>this.gainNode.gain.value=0,s)}}class Sound{constructor(){this.state={engine:!1}}engineOn(){this.state.engine||(this.state.engine=!0,this.engine=this.engine||new Oscillator,this.engine.on({frequency:50,type:"triangle",volume:.2}))}engineOff(){this.state.engine&&(this.state.engine=!1,this.engine.off(),this.engine=null)}playSound(url){const soundUrl=jsfxr__WEBPACK_IMPORTED_MODULE_0___default()(eval(url));var player=new Audio;player.src=soundUrl,player.play()}playerShot(){this.playSound("[2,,0.1749,,0.3063,0.713,0.2,-0.2645,,,,,,0.0543,0.1546,,,,1,,,,,0.5]")}projectileHit(){this.playSound("[3,,0.0867,,0.2283,0.2711,,-0.6853,,,,,,,,,,,1,,,,,0.5]")}}},function(t,e,s){function i(){this.setSettings=function(t){for(var e=0;e<24;e++)this[String.fromCharCode(97+e)]=t[e]||0;this.c<.01&&(this.c=.01);var s=this.b+this.c+this.e;if(s<.18){var i=.18/s;this.b*=i,this.c*=i,this.e*=i}}}var a=new function(){var t,e,s,a,r,o,n,l,h,c,d,u;this._params=new i,this.reset=function(){var t=this._params;a=100/(t.f*t.f+.001),r=100/(t.g*t.g+.001),o=1-t.h*t.h*t.h*.01,n=-t.i*t.i*t.i*1e-6,t.a||(d=.5-t.n/2,u=5e-5*-t.o),l=1+t.l*t.l*(t.l>0?-.9:10),h=0,c=1==t.m?0:(1-t.m)*(1-t.m)*2e4+32},this.totalReset=function(){this.reset();var i=this._params;return t=i.b*i.b*1e5,e=i.c*i.c*1e5,s=i.e*i.e*1e5+12,3*((t+e+s)/3|0)},this.synthWave=function(i,f){var w=this._params,y=1!=w.s||w.v,p=w.v*w.v*.1,g=1+3e-4*w.w,x=w.s*w.s*w.s*.1,m=1+1e-4*w.t,_=1!=w.s,v=w.x*w.x,j=w.g,k=w.q||w.r,b=w.r*w.r*w.r*.2,M=w.q*w.q*(w.q<0?-1020:1020),S=w.p?32+((1-w.p)*(1-w.p)*2e4|0):0,C=w.d,A=w.j/2,E=w.k*w.k*.01,D=w.a,O=t,P=1/t,R=1/e,U=1/s,B=5/(1+w.u*w.u*20)*(.01+x);B>.8&&(B=.8),B=1-B;for(var T,q,z,I,N,W,Y=!1,K=0,L=0,X=0,H=0,F=0,G=0,J=0,Q=0,V=0,Z=0,$=new Array(1024),tt=new Array(32),et=$.length;et--;)$[et]=0;for(et=tt.length;et--;)tt[et]=2*Math.random()-1;for(et=0;et<f;et++){if(Y)return et;if(S&&++V>=S&&(V=0,this.reset()),c&&++h>=c&&(c=0,a*=l),(a*=o+=n)>r&&(a=r,j>0&&(Y=!0)),q=a,A>0&&(Z+=E,q*=1+Math.sin(Z)*A),(q|=0)<8&&(q=8),D||((d+=u)<0?d=0:d>.5&&(d=.5)),++L>O)switch(L=0,++K){case 1:O=e;break;case 2:O=s}switch(K){case 0:X=L*P;break;case 1:X=1+2*(1-L*R)*C;break;case 2:X=1-L*U;break;case 3:X=0,Y=!0}k&&((z=0|(M+=b))<0?z=-z:z>1023&&(z=1023)),y&&g&&((p*=g)<1e-5?p=1e-5:p>.1&&(p=.1)),W=0;for(var st=8;st--;){if(++J>=q&&(J%=q,3==D))for(var it=tt.length;it--;)tt[it]=2*Math.random()-1;switch(D){case 0:N=J/q<d?.5:-.5;break;case 1:N=1-J/q*2;break;case 2:N=.225*(((N=1.27323954*(I=6.28318531*((I=J/q)>.5?I-1:I))+.405284735*I*I*(I<0?1:-1))<0?-1:1)*N*N-N)+N;break;case 3:N=tt[Math.abs(32*J/q|0)]}y&&(T=G,(x*=m)<0?x=0:x>.1&&(x=.1),_?(F+=(N-G)*x,F*=B):(G=N,F=0),H+=(G+=F)-T,N=H*=1-p),k&&($[Q%1024]=N,N+=$[(Q-z+1024)%1024],Q++),W+=N}W*=.125*X*v,i[et]=W>=1?32767:W<=-1?-32768:32767*W|0}return f}};t.exports=function(t){a._params.setSettings(t);var e=a.totalReset(),s=new Uint8Array(4*((e+1)/2|0)+44),i=2*a.synthWave(new Uint16Array(s.buffer,44),e),r=new Uint32Array(s.buffer,0,44);r[0]=1179011410,r[1]=i+36,r[2]=1163280727,r[3]=544501094,r[4]=16,r[5]=65537,r[6]=44100,r[7]=88200,r[8]=1048578,r[9]=1635017060,r[10]=i,i+=44;for(var o=0,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l="data:audio/wav;base64,";o<i;o+=3){var h=s[o]<<16|s[o+1]<<8|s[o+2];l+=n[h>>18]+n[h>>12&63]+n[h>>6&63]+n[63&h]}return l}},function(t,e,s){"use strict";s.r(e);let i=null;class a{constructor(t){this.canvas=t,i=this.canvas.getContext("2d"),this.camera={x:0,y:0}}cameraAdjustX(t){return t-this.camera.x+this.canvas.width/2}cameraAdjustY(t){return t-this.camera.y+this.canvas.height/2}draw(t){i.save(),t(),i.restore()}clearBackground(){i.clearRect(0,0,this.canvas.width,this.canvas.height)}drawBackground(t){i.fillStyle=t,i.fillRect(0,0,this.canvas.width,this.canvas.height)}fillRect({rect:t,color:e,shadowBlur:s,shadowColor:a}){i.fillStyle=e,i.shadowBlur=s,i.shadowColor=a,i.fillRect(this.cameraAdjustX(t[0]),this.cameraAdjustY(t[1]),...t.slice(2))}fillRectUnadjusted({rect:t,color:e}){i.fillStyle=e,i.fillRect(...t)}arc({arc:t,fillColor:e,strokeColor:s,shadowBlur:a,shadowColor:r}){i.beginPath(),i.arc(this.cameraAdjustX(t[0]),this.cameraAdjustY(t[1]),...t.slice(2)),i.shadowBlur=a,i.shadowColor=r,e&&(i.fillStyle=e,i.fill()),s&&(i.strokeStyle=s,i.stroke())}text({text:t,x:e,y:s,size:a="14px",font:r="Courier",letterSpacing:o=!1,isUnadjusted:n=!1}){n||(e=this.cameraAdjustX(e),s=this.cameraAdjustY(s)),i.font=a+" "+r,t=o?t.split("").join(" "):t,i.fillStyle="#fff",i.fillText(t,e,s)}lines({lines:t,shadowBlur:e=0,shadowColor:s,rotation:a,x:r,y:o,fillColor:n,strokeColor:l}){a&&(i.translate(this.cameraAdjustX(r),this.cameraAdjustY(o)),i.rotate(a),i.translate(-1*this.cameraAdjustX(r),-1*this.cameraAdjustY(o))),i.beginPath(),i.moveTo(this.cameraAdjustX(t[0][0]),this.cameraAdjustY(t[0][1])),t.slice(1).map(t=>i.lineTo(this.cameraAdjustX(t[0]),this.cameraAdjustY(t[1]))),i.closePath(),i.shadowBlur=e,i.shadowColor=s,l&&(i.strokeStyle=l,i.stroke()),n&&(i.fillStyle=n,i.fill())}hitbox({x:t,y:e,size:s}){this.fillRect({rect:[t-s/2,e-s/2,s,s],color:"#f00"})}}let r=document.getElementById("c");class o{constructor(){this.canvas=r}initialize(){var t=document.querySelector("body");const e=e=>{t.clientWidth/t.clientHeight>640/480?(r.style.height="100vh")&&(r.style.width="auto"):(r.style.height="auto")&&(r.style.width="100vw")};e(),t.onresize=e}}var n=class{constructor(){document.addEventListener("keyup",t=>this.onKeyup(t)),document.addEventListener("keydown",t=>this.onKeydown(t)),this._pressed={},this.ENTER=13,this.SPACE=32,this.LEFT=37,this.UP=38,this.RIGHT=39,this.DOWN=40}isDown(t){return this._pressed[t]}onKeydown(t){this._pressed[t.keyCode]=!0}onKeyup(t){delete this._pressed[t.keyCode]}},l=s(0);class h{handle(t,e){return!t.exploding&&!e.exploding&&t.x<e.x+e.size/2&&t.x+t.size>e.x-e.size/2&&t.y<e.y+e.size/2&&t.y+t.size>e.y-e.size/2&&(t.destroy(),e.takeDamage(t),!0)}}let c=[];class d{constructor({cw:t,ch:e}){for(let s=0;s<100;s++)c.push([Math.random()*t,Math.random()*e])}draw(t){t.draw(()=>{t.drawBackground("#111"),c.map(e=>t.fillRectUnadjusted({rect:[e[0],e[1],1,1],color:"#fff"})),t.text({text:"back to earth",x:-140,y:-100,size:"36px",font:"serif",letterSpacing:!0}),t.text({text:"Arrow keys to move. SPACE to shoot.",x:-140,y:100}),t.text({text:"ENTER to land back on earth.",x:-110,y:125}),t.text({text:"Shoot things. Collect ore. Upgrade weapons.",x:-173,y:150})})}}class u{constructor(){this.timeout=15}tick(t,e){t.isDown(t.ENTER)&&this.timeout<0&&(this.timeout=15,e.landed=!1,e.timeout=15),this.timeout-=1}draw(t,e){t.draw(()=>{t.fillRectUnadjusted({rect:[0,0,640,480],color:"rgba(0, 0, 0, 0.6)"}),t.fillRectUnadjusted({rect:[150,90,340,300],color:"#fff"}),t.fillRectUnadjusted({rect:[151,91,338,298],color:"#000",shadowBlur:2,shadowColor:"#fff"}),t.text({text:"Welcome to Earth",x:210,y:140,size:"20px",font:"serif",letterSpacing:!0,isUnadjusted:!0}),t.text({text:"If you have "+e.ore+" ore,",x:245,y:180,isUnadjusted:!0}),t.text({text:"you may upgrade your ship",x:215,y:205,isUnadjusted:!0}),t.text({text:"by pressing SPACE",x:247,y:230,isUnadjusted:!0}),t.text({text:"You have "+e.ore+" ore",x:260,y:270,isUnadjusted:!0})})}}class f{draw(t){t.draw(()=>{t.arc({arc:[0,0,50,0,2*Math.PI],fillColor:"#fff",shadowBlur:10,shadowColor:"#fff"})})}}class w{constructor({x:t,y:e,yaw:s,damage:i}){this.x=t,this.y=e,this.yaw=s,this.speed=4,this.lifeSpan=50,this.size=1,this.shouldDie=!1,this.damage=i,this.exploding=!1}tick(){this.lifeSpan-=1,this.lifeSpan<0&&(this.shouldDie=!0),this.exploding||(this.x+=Math.sin(this.yaw)*this.speed,this.y-=Math.cos(this.yaw)*this.speed)}destroy(){this.exploding=!0,this.lifeSpan=2}draw(t){t.draw(()=>{this.exploding?t.arc({arc:[this.x,this.y,4/this.lifeSpan,0,2*Math.PI],fillColor:"#ff8",shadowBlur:10,shadowColor:"#ff0"}):t.fillRect({rect:[this.x,this.y,2,2],color:"#f66",shadowBlur:2,shadowColor:"#f00"})})}}let y=100,p=-400,g=-.1,x=.5,m=3.4,_=.05,v=1,j=.01,k=10,b=.3,M=!0,S={engineOn:!1},C=!1;class A{constructor(){this.projectiles=[],this.landed=!1,this.ore=0,this.timeout=0}tick(t,e,s){if(this.timeout<0&&t.isDown(t.ENTER)&&y*y+p*p<3600&&(this.landed=!0),this.timeout-=1,t.isDown(t.LEFT)&&(m-=_),t.isDown(t.RIGHT)&&(m+=_),S.engineOn=t.isDown(t.UP),S.engineOn){g+=Math.sin(m)*j,x+=Math.cos(m)*-j;var i=Math.sqrt(g*g+x*x);i>v&&(g=g/i*v,x=x/i*v),e.engineOn()}else e.engineOff();t.isDown(t.SPACE)&&M&&(this.projectiles.push(new w({x:y,y:p,yaw:m,damage:1})),M=!1,window.setTimeout(()=>M=!0,1e3*b),e.playerShot()),y+=g,p+=x,s.camera.x=y,s.camera.y=p,C=Math.sqrt(y*y+p*p)>400,this.projectiles.map(t=>t.tick()),this.projectiles=this.projectiles.filter(t=>!t.shouldDie)}draw(t){this.projectiles.map(e=>e.draw(t)),C&&this.drawEarthIndicator(t),S.engineOn&&this.drawEngine(t),t.draw(()=>{t.lines({x:y,y:p,lines:[[y,p-7],[y+5,p+5],[y-5,p+5]],size:k,rotation:m,fillColor:"#070"})})}drawEngine(t){t.draw(()=>{t.lines({x:y,y:p,lines:[[y+-.5*k,p+.5*k],[y+.5*k,p+.5*k],[y,p+.5*k+5*Math.random()],[y+-.5*k,p+.5*k]],rotation:m,fillColor:"orange"})})}drawEarthIndicator(t){t.draw(()=>{let e=Math.atan2(p,y);t.fillRectUnadjusted({rect:[-230*Math.cos(e)+320,-230*Math.sin(e)+240,5,5],color:"#4f4"})})}}const E=[[[-6,-10],[2,-10],[10,-7],[10,-5],[2,0],[10,3],[4,10],[1,8],[-6,10],[-10,2],[-10,-5],[-5,-5]],[[-5,-10],[0,-7],[5,-10],[10,-3],[5,0],[9,5],[4,10],[-3,7],[-7,9],[-10,5],[-7,0],[-9,-6]]];class D{constructor({x:t,y:e}){this.x=t,this.y=e,this.dx=4*Math.random()-2,this.dy=4*Math.random()-2,this.shouldDie=!1,this.exploding=!1}tick(){this.x+=this.dx,this.y+=this.dy}draw(t,e){t.draw(()=>{console.log(255*e/50),t.fillRect({rect:[this.x,this.y,2,2],color:"rgba(255, 255, 255, "+255*e/50+")",shadowBlur:2,shadowColor:"rgba(255, 255, 255, "+255*e/50+")"})})}}class O{constructor({x:t,y:e}){this.x=t,this.y=e,this.asteroidStyle=Math.floor(Math.random()*E.length),this.rotation=Math.random()*Math.PI,this.turnSpeed=.03*Math.random(),this.size=20,this.health=3,this.shouldDie=!1,this.exploding=!1}takeDamage({damage:t}){this.health-=t,this.health<=0&&(this.exploding=!0,this.debris=Array(20).fill().map(t=>new D({x:this.x,y:this.y})),this.lifespan=50)}tick(){this.exploding&&(this.lifespan-=1,this.debris.map(t=>t.tick()),this.lifespan<=0&&(this.shouldDie=!0)),this.rotation+=this.turnSpeed}draw(t){t.draw(()=>{this.exploding?this.debris.map(e=>e.draw(t,this.lifespan)):t.lines({lines:E[this.asteroidStyle].map(t=>[this.x+t[0],this.y+t[1]]),strokeColor:"#fff",shadowBlur:8,shadowColor:"#fff",rotation:this.rotation,x:this.x,y:this.y})})}}class P{constructor(){this.asteroids=[];for(let t=0;t<40;t++){let t=Math.random()*Math.PI*2,e=Math.sin(t)*(210+400*Math.random()),s=Math.cos(t)*(210+400*Math.random());this.asteroids.push(new O({x:e,y:s}))}}tick(){this.asteroids.forEach(t=>t.tick()),this.asteroids=this.asteroids.filter(t=>!t.shouldDie)}draw(t){this.asteroids.map(e=>e.draw(t))}}window.onload=()=>{document.querySelector("main").className+=" loaded";const t=new o,e=new a(t.canvas),s=new n,i=new l.a,r=new h;t.initialize();let c={cw:t.canvas.width,ch:t.canvas.height},w=(new Date).getTime(),y=0,p=0,g=()=>{x(),m(),_()},x=()=>{M.landed?k.tick(s,M):(M.tick(s,i,e),S.tick())},m=()=>{M.projectiles.forEach(t=>{S.asteroids.forEach(e=>{r.handle(t,e,i)&&i.projectileHit()})})},_=()=>{window.requestAnimationFrame(g),y=(new Date).getTime(),(p=y-w)>1e3/60&&(e.clearBackground(),v().map(t=>t.draw(e)),M.landed&&k.draw(e,M),w=y-p%(1e3/60))},v=()=>[j,b,S,M];const j=new d(c),k=new u,b=new f,M=new A,S=new P;g()}}]);